@page "/weatherforecast"

@using WeatherUI.Shared;
@inject HttpClient Http;


@code {
    const string PageTitle = "Weather forecast";

    private WeatherForecast[]? forecasts;

    private static string ToPath(WeatherForecast item)
    {
        return $"weatherforecast/{item.Date.ToString("yyyy-MM-dd")}";
    }

    protected override async Task OnInitializedAsync()
    {
        forecasts = await Http.GetFromJsonAsync<WeatherForecast[]>("api/weatherforecasts");
    }
}


<PageTitle>@PageTitle</PageTitle>

<header>
    <h1>@PageTitle</h1>
</header>

<p>This component demonstrates fetching data from the server.</p>

@if (forecasts == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Temp. (C)</th>
                <th>Temp. (F)</th>
                <th>Summary</th>
            </tr>
        </thead>
        <tbody>
            <Virtualize Items="forecasts">
                <tr @key="context.Date">
                    <td>
                        <NavLink href="@ToPath(context)">
                            @context.Date.ToShortDateString()
                        </NavLink>
                    </td>
                    <td>@context.TemperatureC</td>
                    <td>@context.TemperatureF</td>
                    <td>@context.Summary</td>
                </tr>
            </Virtualize>
        </tbody>
    </table>
}
